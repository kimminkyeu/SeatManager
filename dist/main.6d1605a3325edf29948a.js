!function(){var e,t,r,n={751:function(e,t,r){"use strict";var n=r(5338),o=(r(2675),r(9463),r(2259),r(8706),r(3418),r(3792),r(4782),r(2010),r(6033),r(6099),r(7495),r(8781),r(7764),r(3500),r(2953),r(6540)),i=r(3676),a=(r(5700),r(3771),r(2008),r(9572),r(2892),r(9868),r(3851),r(1278),r(9432),r(875),r(825),r(3829));function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function u(e,t,r){return t=f(t),function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,s()?Reflect.construct(t,r||[],f(e).constructor):t.apply(e,r))}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(s=function(){return!!e})()}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function d(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}var v=r(4148);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function h(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==b(t)?t:t+""}var m=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},r=[{key:"_assertImpl",value:function(e,t,r){if(!1===e)throw new v.AssertionError({message:t?"".concat(null!=r?r:"Anonymous",": ").concat(t):void 0})}},{key:"NonNull",value:function(e,t,r){this._assertImpl(null!=e,t,r)}},{key:"Never",value:function(e){this._assertImpl(!1,e)}},{key:"True",value:function(e,t,r){this._assertImpl(!0===e,t)}}],(t=null)&&y(e.prototype,t),r&&y(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){C(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,R(n.key),n)}}function E(e,t,r){return t=x(t),function(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,S()?Reflect.construct(t,r||[],x(e).constructor):t.apply(e,r))}function S(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(S=function(){return!!e})()}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}function N(e,t){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},N(e,t)}function C(e,t,r){return(t=R(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R(e){var t=function(e,t){if("object"!=g(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==g(t)?t:t+""}var _=function(e){function t(e,r,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=E(this,t,[void 0,null==n?void 0:n.groupOptions]))._seatMapObjectType=e,null!=n&&n.innerShapeOptions&&(o._innerShape=o._createInternalFabricObject(r,null==n?void 0:n.innerShapeOptions),o.addWithUpdate(o._innerShape)),null!=n&&n.innerTextOptions&&(o._innerLabelText=o._createInternalFabricObject(I.FABRIC_TEXT,null==n?void 0:n.innerTextOptions),o.add(o._innerLabelText)),o.setOptions(null==n?void 0:n.groupOptions),o.setControlsVisibility(null==n?void 0:n.controlVisibilityOptions),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&N(e,t)}(t,e),r=t,(n=[{key:"afterModified",value:function(){}},{key:"afterScaling",value:function(){}},{key:"afterRotating",value:function(){}},{key:"innerShapeType",get:function(){return this._innerShape?(m.NonNull(this._innerShape.type),m.True(this._innerShape.type in I),this._innerShape.type):I.UNDEFINED}},{key:"seatMapObjectType",get:function(){return this._seatMapObjectType}},{key:"updateInnerTextContent",value:function(e){var t;null===(t=this._innerLabelText)||void 0===t||t.set({text:e})}},{key:"updateInnerTextAngle",value:function(e){var t;null===(t=this._innerLabelText)||void 0===t||t.set({angle:e})}},{key:"updateInnerTextVisibility",value:function(e){var t;null===(t=this._innerLabelText)||void 0===t||t.set({visible:e})}},{key:"_createInternalFabricObject",value:function(e,r){switch(e){case I.FABRIC_CIRCLE:var n=r;return m.True(void 0!==(null==n?void 0:n.radius),"circle 오브젝트 생성시 radius를 반드시 option에 기입해주세요."),new i.fabric.Circle(w({fill:"#000000",originX:"center",originY:"center",hasControls:!1},r));case I.FABRIC_RECT:return m.True(void 0!==(null==r?void 0:r.width),"rect 오브젝트 생성시 width를 반드시 option에 기입해주세요."),m.True(void 0!==(null==r?void 0:r.height),"rect 오브젝트 생성시 height를 반드시 option에 기입해주세요."),new i.fabric.Rect(w({fill:"#000000",originX:"center",originY:"center",hasControls:!1},r));case I.FABRIC_TEXT:var o=r,a=o.text?o.text:"empty text";return new i.fabric.Text(a,w({fill:"#000000",fontFamily:"Helvetica",fontSize:t.DEAULT_LABEL_FONT_SIZE,fontWeight:"400",originX:"center",originY:"center",hasControls:!1},r));default:return m.Never("지원하지 않는 Shape입니다: ".concat(e)),{}}}}])&&j(r.prototype,n),o&&j(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(function(e){function t(){var e,r,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];return e=u(this,t,[].concat(l)),r=e,n="_objectId",o=(0,a.A)(),(n=d(n))in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(t,e),r=t,(n=[{key:"objectId",get:function(){return this._objectId}}])&&c(r.prototype,n),o&&c(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(i.fabric.Group));function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function A(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,T(n.key),n)}}function T(e){var t=function(e,t){if("object"!=P(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==P(t)?t:t+""}C(_,"DEAULT_LABEL_FONT_SIZE",15);var I={UNDEFINED:"undefined",FABRIC_GROUP:"group",FABRIC_TEXT:"i-text",FABRIC_IMAGE:"image",FABRIC_CIRCLE:"circle",FABRIC_TRIANGLE:"triangle",FABRIC_RECT:"rect",FABRIC_PATH:"path",FABRIC_ACTIVE_SELECTION:"activeSelection"},k={SECTOR:"sector",SEAT:"seat",VENUE:"venue",ASSET:"asset"},F=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},r=[{key:"getType",value:function(e){return e instanceof _?e.seatMapObjectType:e.type}}],(t=null)&&A(e.prototype,t),r&&A(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}();function B(e){return e instanceof _}var U={panning:"panning",select:"select",delete:"delete",group:"group",ungroup:"ungroup",circle:I.FABRIC_CIRCLE,text:I.FABRIC_TEXT,image:I.FABRIC_IMAGE,seat:k.SEAT,sector:k.SECTOR},D="#d9d9d9",L="#F2F2F2",M="#c2c2c2",X=.3,Y=40,G=40,V={radius:{default:20}},z=40,K={venue:{default:"#000000"},object:{default:"#83c3b8"},text:{default:"#000000"}},W={icon:"/select.5975c901c09c38e054c54ac09ca45a98.svg",name:"Select",value:U.select},q={icon:"/panning.d78879d4903caf97a0c860ee193ab211.svg",name:"Panning",value:U.panning},H=(U.circle,{icon:"/text.8c6dadd05d31f2e44d665cf75d3bd86d.svg",name:"Text",value:U.text}),Z={icon:"/image.d6df5dcb2501bbec46c752d164a51569.svg",name:"Image",value:U.image},J={icon:"/group.5240b8b22eb4b9c22dcb91e3c2b219d9.svg",name:"Group",value:U.group},$={icon:"/ungroup.bd4cb7d18c3bda73efd7e30bce7c92fa.svg",name:"Ungroup",value:U.ungroup},Q={icon:"/delete.84f193e07ead0aa2265230941c157f80.svg",name:"Delete",value:U.delete},ee={icon:"/sector.c49af4e46c3b50a5dcfb167c4de7580c.svg",name:"Generate Sector",value:U.sector},te=[q,W,ee,Z,H,J,$,Q],re=W,ne=[{label:"Bring to Front",value:"front",icon:"/front.466ce829ea8745b97ca1be3d18849c30.svg",shortcuts:"ctrl + ]"},{label:"Send to Back",value:"back",icon:"/back.4d2f61d59b0e8438682713e78a373412.svg",shortcuts:"ctrl + ["}];function oe(e){return oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oe(e)}function ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(r),!0).forEach((function(t){le(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function le(e,t,r){var n;return n=function(e,t){if("object"!=oe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=oe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==oe(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ce=function(e,t){var r;return new i.fabric.Circle(ae({radius:V.radius.default,left:null==e?void 0:e.x,top:null==e?void 0:e.y,opacity:null!==(r=null==t?void 0:t.opacity)&&void 0!==r?r:1,hasControls:!1,objectId:(0,a.A)()},t))},ue=function(e,t){var r,n,o;return new i.fabric.Rect(ae({left:null==e?void 0:e.x,top:null==e?void 0:e.y,opacity:null!==(r=null==t?void 0:t.opacity)&&void 0!==r?r:1,width:null!==(n=null==t?void 0:t.width)&&void 0!==n?n:100,height:null!==(o=null==t?void 0:t.height)&&void 0!==o?o:100,objectId:(0,a.A)()},t))},se=function(e,t,r){var n;return new i.fabric.IText(e,ae({left:null==t?void 0:t.x,top:null==t?void 0:t.y,opacity:null!==(n=null==r?void 0:r.opacity)&&void 0!==n?n:1,fill:"black",fontFamily:"Helvetica",fontSize:24,fontWeight:"400",objectId:(0,a.A)()},r))};function fe(e,t,r){switch(e){case I.FABRIC_CIRCLE:return ce(t,r);case I.FABRIC_TEXT:return se("double click to type...",t,r);case I.FABRIC_RECT:return ue(t,r);default:m.Never("지원하지 않는 Shape입니다: ".concat(e))}}var pe=function(e){var t=e.file,r=e.canvas,n=new FileReader;n.onload=function(){i.fabric.Image.fromURL(n.result,(function(e){e.scaleToWidth(200),e.scaleToHeight(200),r.current.add(e),e.objectId=(0,a.A)(),r.current.requestRenderAll()}))},n.readAsDataURL(t)},de=function(e,t,r){return"width"===t?(e.set("scaleX",1),void e.set("width",r)):"height"===t?(e.set("scaleY",1),void e.set("height",r)):void(!1!=t in e&&e[t]!==r&&e.set(t,r))},ve=function(e){var t=e.direction,r=e.canvas;if(r){var n=r.getActiveObject();n&&"activeSelection"!==(null==n?void 0:n.type)&&("front"===t?r.bringToFront(n):"back"===t&&r.sendToBack(n),r.renderAll())}};function be(e){return be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},be(e)}function ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function he(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(r),!0).forEach((function(t){me(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ye(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function me(e,t,r){var n;return n=function(e,t){if("object"!=be(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=be(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==be(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ge=function(e){var t=e.htmlCanvasElementId,r=e.fabricRef,n=e.canvasRef,o=document.getElementById(t),a=new i.fabric.Canvas(n.current,{width:null==o?void 0:o.clientWidth,height:null==o?void 0:o.clientHeight,preserveObjectStacking:!0,backgroundColor:L});return r.current=a,a},Oe=function(e){var t=e.options,r=e.fabricCanvas,n=e.previewCanvas,o=e.selectedToolValueRef,a=e.lastModifiedObjectRef,l=e.isPanningRef,c=e.lastMousePointerRef,u=e.isSectorCreatingRef,s=e.previewSeatShapeRef;m.NonNull(o.current,"선택된 툴은 반드시 있어야 합니다.");var f=r.getPointer(t.e),p=r.findTarget(t.e,!1),d=t.e,v=document.getElementById("fabric-canvas");m.NonNull(v);var b,y,h,g=d.clientX-v.getBoundingClientRect().x,O=d.clientY-v.getBoundingClientRect().y,w=null;switch(o.current){case U.panning:l.current=!0,c.current={x:g,y:O},r.setCursor("grabbing");break;case U.select:!p||o.current!==p.type&&"activeSelection"!==p.type||(r.setActiveObject(p),p.setCoords(),a.current=p);break;case U.text:w=fe(U.text,f);break;case U.sector:u.current=!0,c.current={x:g,y:O};var j=(y=ue(b=f,{opacity:X,width:0,height:0,originX:"center",originY:"center",stroke:K.object.default,strokeWidth:4}),h=se("hello",b,{opacity:X,originX:"center",originY:"center"}),new i.fabric.Group([y,h],{left:null==b?void 0:b.x,top:null==b?void 0:b.y,originX:"left",originY:"top",lockScalingX:!1,lockScalingY:!1}));j&&(n.add(j),j.setCoords(),s.current=j);break;default:m.Never("아직 미구현된 기능입니다.")}w&&(w.selectable=!1,r.add(w),a.current=w)},we=function(e){return je(e[0])},je=function(e){switch(F.getType(e)){case k.VENUE:case k.SECTOR:case k.SEAT:return e.extractEditingState();case I.FABRIC_GROUP:var t=e.getObjects();return Ee(t[0]);default:return Ee(e)}},Ee=function(e){var t,r=e.scaleX?e.width*e.scaleX:e.width,n=null!=e&&e.scaleY?e.height*(null==e?void 0:e.scaleY):e.height;return{type:"ShapeEditingAttribute",width:(null==r?void 0:r.toFixed(0).toString())||"",height:(null==n?void 0:n.toFixed(0).toString())||"",fill:(null===(t=e.fill)||void 0===t?void 0:t.toString())||"",stroke:e.stroke||"",fontSize:(null==e?void 0:e.fontSize)||"",fontFamily:(null==e?void 0:e.fontFamily)||"",fontWeight:(null==e?void 0:e.fontWeight)||""}},Se=function(e){var t=e.options,r=e.setEditingElementUiAttributes;if(null!=t&&t.selected){var n=null==t?void 0:t.selected[0];if(n&&1===t.selected.length)r(je(n));else if(n&&1<t.selected.length)r(we(t.selected));else;}},xe=function(e){var t=e.options,r=e.setEditingElementUiAttributes;if(null!=t&&t.selected){var n=null==t?void 0:t.selected[0];if(n&&1===t.selected.length)r(je(n));else if(n&&1<t.selected.length)r(we(t.selected));else;}},Ne=function(e){var t=e.options,r=e.setEditingElementUiAttributes,n=t.target,o=null!=n&&n.scaleX?(null==n?void 0:n.width)*(null==n?void 0:n.scaleX):null==n?void 0:n.width,i=null!=n&&n.scaleY?(null==n?void 0:n.height)*(null==n?void 0:n.scaleY):null==n?void 0:n.height;r((function(e){return he(he({},e),{},{width:(null==o?void 0:o.toFixed(0).toString())||"",height:(null==i?void 0:i.toFixed(0).toString())||""})}))},Ce=function(e){var t=e.htmlCanvasElementId,r=e.canvas,n=document.getElementById(t);n&&r&&r.setDimensions({width:n.clientWidth,height:n.clientHeight})},Re=function(e){var t,r=e.options,n=e.canvas,o=null===(t=r.e)||void 0===t?void 0:t.deltaY,i=n.getZoom();i=Math.min(Math.max(.2,i+.001*o),1),n.zoomToPoint({x:r.e.offsetX,y:r.e.offsetY},i),r.e.preventDefault(),r.e.stopPropagation()},_e=(r(9085),["id","className"]);function Pe(){return Pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pe.apply(this,arguments)}function Ae(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var Te=o.forwardRef((function(e,t){var r=e.id,n=e.className,i=Ae(e,_e);return o.createElement("div",{id:r,className:"".concat(n," relative")},o.createElement("canvas",Pe({ref:t},i)))})),Ie="ShapeEditingAttribute",ke="SeatEditingAttribute",Fe="SectorEditingAttribute",Be=r(5920),Ue=r(2478);r(888);function De(e){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},De(e)}function Le(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Me(n.key),n)}}function Me(e){var t=function(e,t){if("object"!=De(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=De(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==De(t)?t:t+""}function Xe(e,t,r){return t=ze(t),function(e,t){if(t&&("object"===De(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ye()?Reflect.construct(t,r||[],ze(e).constructor):t.apply(e,r))}function Ye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ye=function(){return!!e})()}function Ge(e,t){return Ge=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ge(e,t)}function Ve(){return Ve="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ze(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Ve.apply(this,arguments)}function ze(e){return ze=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ze(e)}var Ke=function(e){function t(e,r,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Xe(this,t,[e,r,n])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ge(e,t)}(t,e),r=t,(n=[{key:"toObject",value:function(e){return null==e||e.push("seatMapObjectProperty"),Ve(ze(t.prototype),"toObject",this).call(this,e)}}])&&Le(r.prototype,n),o&&Le(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(_);function We(e){return We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},We(e)}function qe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,He(n.key),n)}}function He(e){var t=function(e,t){if("object"!=We(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=We(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==We(t)?t:t+""}function Ze(e,t,r){return t=$e(t),function(e,t){if(t&&("object"===We(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Je()?Reflect.construct(t,r||[],$e(e).constructor):t.apply(e,r))}function Je(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Je=function(){return!!e})()}function $e(e){return $e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$e(e)}function Qe(e,t){return Qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Qe(e,t)}var et=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ze(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qe(e,t)}(t,e),r=t,n&&qe(r.prototype,n),o&&qe(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(Ke),tt=r(4164),rt=r(856);function nt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,rt.QP)((0,tt.$)(t))}var ot=["className"];function it(){return it=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},it.apply(this,arguments)}function at(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var lt=(0,Ue.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ct=o.forwardRef((function(e,t){var r=e.className,n=at(e,ot);return o.createElement(Be.b,it({ref:t,className:nt(lt(),r)},n))}));ct.displayName=Be.b.displayName;var ut=r(2543),st=r.n(ut),ft=r(6540),pt=function(e){var t,r=e.inputRef,n=e.editingElementUiAttributes,o=(e.attributeType,e.handleInputChange);return ft.createElement("div",{className:"prose flex flex-col border-b border-primary-grey-200 p-5"},ft.createElement("h3",{className:" prose-base"},"Fill"),ft.createElement("div",{className:"flex items-center gap-2 border border-primary-grey-200",onClick:function(){return r.current.click()}},ft.createElement("input",{type:"color",defaultValue:n.fill,ref:r,onChange:(0,ut.debounce)((function(e){return o("fill",e.target.value)}),100)}),ft.createElement(ct,{className:"flex-1"},null!==(t=n.fill)&&void 0!==t?t:"?")))},dt=r(3362),vt=["className","variant","size","asChild"];function bt(){return bt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bt.apply(this,arguments)}function yt(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var ht=(0,Ue.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),mt=o.forwardRef((function(e,t){var r=e.className,n=e.variant,i=e.size,a=e.asChild,l=void 0!==a&&a,c=yt(e,vt),u=l?dt.DX:"button";return o.createElement(u,bt({className:nt(ht({variant:n,size:i,className:r})),ref:t},c))}));mt.displayName="Button";var gt=r(7049),Ot=r(6540),wt=function(e){var t=e.handleExport,r=e.label;return Ot.createElement("div",{className:"flex flex-col gap-3 px-5 py-2"},Ot.createElement(mt,{variant:"default",className:"w-full",onClick:function(){return t()}},Ot.createElement(gt.s3U,{className:" mr-2 h-4 w-4"})," ",r))},jt=(r(2062),["className","type"]);function Et(){return Et=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Et.apply(this,arguments)}function St(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var xt=o.forwardRef((function(e,t){var r=e.className,n=e.type,i=St(e,jt);return o.createElement("input",Et({type:n,className:nt("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",r),ref:t},i))}));xt.displayName="Input";var Nt=r(6540),Ct=[{label:"row",property:"seatRow"},{label:"column",property:"seatCol"}],Rt=function(e){var t=e.editingElementUiAttributes,r=e.handleInputChange,n=e.keyboardEventDisableRef,o=function(e){if(!t)return"";var r=t[e];return r||""};return Nt.createElement("section",{className:"prose p-5 flex flex-col border-b border-primary-grey-200"},Nt.createElement("h3",{className:" prose-base"},"Seat"),Nt.createElement("div",{className:"flex flex-col gap-4"},Ct.map((function(e){return Nt.createElement("div",{key:e.label,className:"flex flex-1 items-center gap-2 rounded-sm"},Nt.createElement(ct,{htmlFor:e.label,className:" text-[12px] min-w-12"},e.label),Nt.createElement(xt,{className:"input-ring",type:"number",id:e.property,value:o(e.property),placeholder:"?",min:1,onChange:function(t){return r(e.property,t.target.value)},onFocus:function(e){n.current=!0},onBlur:function(e){n.current=!1}}))}))))},_t=function(e){!function(e){var t=e.canvas,r=e.property,n=e.value;t.getActiveObjects().forEach((function(e){e&&"activeSelection"!==(null==e?void 0:e.type)&&(F.getType(e)===I.FABRIC_GROUP?(de(e,r,n),e.getObjects().forEach((function(e){de(e,r,n)}))):de(e,r,n),t.requestRenderAll())}))}({canvas:e.canvas,property:e.property,value:e.value})},Pt=["fill"];function At(){return At=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},At.apply(this,arguments)}function Tt(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function It(e){var t=e.fill,r=Tt(e,Pt);return o.createElement("img",At({className:t?"object-fill":"object-cover"},r))}var kt=r(6674),Ft=["tooltip"];function Bt(){return Bt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bt.apply(this,arguments)}function Ut(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var Dt=o.forwardRef((function(e,t){var r=e.tooltip,n=Ut(e,Ft);return o.createElement(kt.Bc,null,o.createElement(kt.m_,null,o.createElement(kt.k$,{asChild:!0},o.createElement(mt,Bt({},n,{ref:t}))),o.createElement(kt.ZI,null,o.createElement("p",null,r))))})),Lt=r(6540),Mt=function(e){return Lt.createElement("div",{className:"prose flex flex-col p-5 border-b border-primary-grey-200"},Lt.createElement("h3",{className:" prose-base"},"Layer"),Lt.createElement("ul",{className:" text-slate-900 flex flex-row p-0 justify-center gap-2"},ne.map((function(t){return Lt.createElement("li",{key:t.label,onClick:function(){},className:"\n                            group flex justify-center items-center m-0 p-0\n                        "},Lt.createElement(Dt,{tooltip:t.label,variant:"outline",className:"relative w-12 h-12 bg-gray-100 hover:bg-gray-300",onClick:function(r){e.fabricRef.current&&ve({direction:t.value,canvas:e.fabricRef.current})}},Lt.createElement(It,{src:t.icon,alt:t.label,fill:!0})))}))))},Xt=r(7770),Yt=["className"];function Gt(){return Gt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gt.apply(this,arguments)}function Vt(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var zt=o.forwardRef((function(e,t){var r=e.className,n=Vt(e,Yt);return o.createElement(Xt.bL,Gt({ref:t,className:nt("relative flex w-full touch-none select-none items-center",r)},n),o.createElement(Xt.CC,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20"},o.createElement(Xt.Q6,{className:"absolute h-full bg-primary"})),o.createElement(Xt.zi,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"}))}));zt.displayName=Xt.bL.displayName;var Kt=r(6540),Wt=[{label:"ID",property:"sectorId",controlType:"input"},{label:"gap X",property:"sectorGapX",controlType:"slider"},{label:"gap Y",property:"sectorGapY",controlType:"slider"}],qt=function(e){var t=e.editingElementUiAttributes,r=e.handleInputChange,n=e.keyboardEventDisableRef;return Kt.createElement("section",{className:"prose p-5 flex flex-col border-b border-primary-grey-200"},Kt.createElement("div",{className:"my-2 gap-2 flex flex-row items-center"},Kt.createElement("h3",{className:" m-0"},"구역명 :"),Kt.createElement("h3",{className:"m-0",style:{color:t.fill}},"".concat(t.sectorId))),Kt.createElement("div",{className:"flex flex-col gap-4"},Wt.map((function(e){return Kt.createElement("div",{key:e.property,className:"flex flex-1 items-center gap-2 rounded-sm"},Kt.createElement(ct,{htmlFor:e.property,className:" text-[12px] min-w-12"},e.label),"input"===e.controlType&&Kt.createElement(xt,{className:"input-ring",type:"sectorId"===e.property?"text":"number",id:e.property,value:t.sectorId,placeholder:"?",min:1,onChange:function(t){return r(e.property,t.target.value)},onFocus:function(e){n.current=!0},onBlur:function(e){n.current=!1}}),"slider"===e.controlType&&Kt.createElement(zt,{id:e.property,defaultValue:[t[e.property]],min:0,max:100,step:1,onValueChange:function(t){return r(e.property,t[0])}}))}))))},Ht=r(3422),Zt=["className"],Jt=["className","children"],$t=["className"],Qt=["className"],er=["className"];function tr(){return tr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tr.apply(this,arguments)}function rr(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var nr=Ht.bL,or=Ht.l9,ir=Ht.ZL,ar=(Ht.bm,o.forwardRef((function(e,t){var r=e.className,n=rr(e,Zt);return o.createElement(Ht.hJ,tr({ref:t,className:nt("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r)},n))})));ar.displayName=Ht.hJ.displayName;var lr=o.forwardRef((function(e,t){var r=e.className,n=e.children,i=rr(e,Jt);return o.createElement(ir,null,o.createElement(ar,null),o.createElement(Ht.UC,tr({ref:t,className:nt("fixed left-[50%] top-[50%] z-50 grid w-full translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r)},i),n,o.createElement(Ht.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground"},o.createElement(gt.MKb,{className:"h-4 w-4"}),o.createElement("span",{className:"sr-only"},"Close"))))}));lr.displayName=Ht.UC.displayName;var cr=function(e){var t=e.className,r=rr(e,$t);return o.createElement("div",tr({className:nt("flex flex-col space-y-1.5 text-center sm:text-left",t)},r))};cr.displayName="DialogHeader";var ur=o.forwardRef((function(e,t){var r=e.className,n=rr(e,Qt);return o.createElement(Ht.hE,tr({ref:t,className:nt("text-2xl font-semibold leading-none tracking-tight",r)},n))}));ur.displayName=Ht.hE.displayName;var sr=o.forwardRef((function(e,t){var r=e.className,n=rr(e,er);return o.createElement(Ht.VY,tr({ref:t,className:nt("text-muted-foreground",r)},n))}));sr.displayName=Ht.VY.displayName;var fr=r(6540),pr=["markup"];function dr(){return dr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dr.apply(this,arguments)}function vr(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function br(e){var t=e.markup,r=vr(e,pr);return fr.createElement("div",dr({},r,{id:"html-preview",dangerouslySetInnerHTML:{__html:t}}))}var yr=r(6540);function hr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return mr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var gr=function(e){var t=e.createHtmlPreview,r=e.label,n=hr((0,o.useState)(!1),2),i=n[0],a=n[1];return yr.createElement("div",{className:" px-5 py-2"},yr.createElement(nr,{onOpenChange:function(){a((function(e){return!e}))}},yr.createElement(or,{asChild:!0},yr.createElement(mt,{className:" w-full"},yr.createElement(gt.N5q,{className:" mr-2 h-4 w-4"})," ",r)),yr.createElement(lr,{className:" w-4/5 min-h-[90vh] "},yr.createElement(cr,null,yr.createElement(ur,null,"HTML Preview"),yr.createElement(sr,{className:" prose-xl"},"아래 검은색 점선 영역이 HTML <Div>로 변환한 렌더링한 결과입니다.",yr.createElement("br",null),"커서를 가져다 올려보세요!")),yr.createElement("div",{className:" prose-2xl font-bold text-red-600",id:"preview-selected-seat-info"}),yr.createElement(br,{className:"  py-4 w-full h-full overflow-auto ",markup:i?t():""}))))},Or=r(7933),wr=["className","orientation","decorative"];function jr(){return jr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jr.apply(this,arguments)}function Er(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var Sr=o.forwardRef((function(e,t){var r=e.className,n=e.orientation,i=void 0===n?"horizontal":n,a=e.decorative,l=void 0===a||a,c=Er(e,wr);return o.createElement(Or.b,jr({ref:t,decorative:l,orientation:i,className:nt("shrink-0 bg-border","horizontal"===i?"h-[1px] w-full":"h-full w-[1px]",r)},c))}));Sr.displayName=Or.b.displayName;var xr=r(6540),Nr=[{label:"이름",property:"venueId",controlType:"input"}],Cr=function(e){var t=e.editingElementUiAttributes,r=e.handleInputChange,n=e.keyboardEventDisableRef;return xr.createElement("section",{className:"prose p-5 flex flex-col border-b border-primary-grey-200"},xr.createElement("div",{className:"my-2 gap-2 flex flex-row items-center"},xr.createElement("h3",{className:" m-0"},"공연장: "),xr.createElement("h3",{className:"m-0"},"".concat(t.venueId))),xr.createElement("div",{className:"flex flex-col gap-4"},Nr.map((function(e){return xr.createElement("div",{key:e.property,className:"flex flex-1 items-center gap-2 rounded-sm"},xr.createElement(ct,{htmlFor:e.property,className:" text-[12px] min-w-12"},e.label),"input"===e.controlType&&xr.createElement(xt,{className:"input-ring",type:"venueId"===e.property?"text":"number",id:e.property,value:t.venueId,placeholder:"?",min:1,onChange:function(t){return r(e.property,t.target.value)},onFocus:function(e){n.current=!0},onBlur:function(e){n.current=!1}}))}))))};r(3296),r(7208),r(8408);function Rr(e,t){m.NonNull(t.width,"venue의 width가 null입니다."),m.NonNull(t.height,"venue의 height가 null입니다.");var r=[],n=[];return e.forEachObject((function(e){var o,i,a=F.getType(e);switch(a){case k.VENUE:break;case k.SECTOR:m.True(e instanceof et);var l=e.exportAsSeatMapFormat({left:t.left,top:t.top});r.push(l);break;case k.SEAT:m.True(e instanceof et),m.Never("Seat은 반드시 Sector(구역)에 소속되어야 합니다.                                Canvas 안에 개별적인 Seat가 존재해선 안됩니다!");break;case I.FABRIC_IMAGE:var c=e,u=c.left,s=c.top,f=c.left?c.left-(null!==(o=t.left)&&void 0!==o?o:0):c.left,p=c.top?c.top-(null!==(i=t.top)&&void 0!==i?i:0):c.top;c.setOptions({left:f,top:p}),m.NonNull(c.left),m.NonNull(c.top),n.push({type:I.FABRIC_IMAGE,x:c.left,y:c.top,width:c.getScaledWidth(),height:c.getScaledHeight(),base64Jpeg:c.toDataURL({format:"jpeg"}),angle:c.angle}),c.setOptions({left:u,top:s});break;default:m.Never("지원하지 않는 타입입니다. type:".concat(a))}})),{venueId:t.venueId,width:t.width,height:t.height,sectors:r,images:n}}function _r(e){return _r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_r(e)}function Pr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ar(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pr(Object(r),!0).forEach((function(t){Tr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Tr(e,t,r){var n;return n=function(e,t){if("object"!=_r(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=_r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==_r(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ir=function(e){var t=e.keyboardEventDisableRef,r=e.editingElementUiAttributes,n=e.setEditingElementUiAttributes,i=e.fabricRef,a=e.venueRef,l=(0,o.useRef)(null),c=function(e,t){n((function(r){return r?Ar(Ar({},r),{},Tr({},e,t)):null})),_t({canvas:i.current,property:e,value:t})},u=(0,o.useMemo)((function(){return o.createElement("section",{className:" flex flex-col  text-slate-900 shadow-xl h-full min-w-[227px] max-w-56 max-sm:hidden select-none "},r&&"SectorEditingAttribute"===r.type&&o.createElement(qt,{fabricRef:i,editingElementUiAttributes:r,handleInputChange:c,keyboardEventDisableRef:t}),r&&"SeatEditingAttribute"===r.type&&o.createElement(Rt,{fabricRef:i,editingElementUiAttributes:r,handleInputChange:c,keyboardEventDisableRef:t}),r&&"VenueEditingAttribute"===r.type&&o.createElement(Cr,{fabricRef:i,editingElementUiAttributes:r,handleInputChange:c,keyboardEventDisableRef:t}),r&&(r.type===Ie||r.type===ke||r.type===Fe)&&o.createElement(pt,{inputRef:l,editingElementUiAttributes:r,placeholder:"color",attributeType:"fill",handleInputChange:c}),r&&o.createElement(Mt,{fabricRef:i}),o.createElement(Sr,null),o.createElement(wt,{label:"JSON으로 내보내기 (압축v2)",handleExport:function(){m.NonNull(i.current),m.NonNull(a.current);var e,t,r,n,o=Rr(i.current,a.current);e="".concat(o.venueId,".json"),t=JSON.stringify(o,null,2),r=document.createElement("a"),n=new Blob([t],{type:"application/json"}),r.href=URL.createObjectURL(n),r.download=e,r.click(),URL.revokeObjectURL(r.href)}}),o.createElement(gr,{label:"HTML 미리보기 (압축v2)",createHtmlPreview:function(){m.NonNull(i.current),m.NonNull(a.current);var e=function(e){var t=[],r=[],n=[];return e.sectors.forEach((function(e){e.seats.forEach((function(n){switch(n.seatShape.type){case I.FABRIC_CIRCLE:var o=n.seatShape;t.push('<circle \n                                                id="'.concat(n.seatId,'" \n                                                cx="').concat(o.cx,'" \n                                                cy="').concat(o.cy,'" \n                                                r="').concat(o.r,'" \n                                                fill="').concat(o.fill,'" \n                                                />\n')),r.push({seatId:n.seatId,seatRow:n.seatRow,seatCol:n.seatCol,sectorId:e.sectorId});break;case I.FABRIC_RECT:var i=n.seatShape;t.push('<rect\n                                                id="'.concat(n.seatId,'" \n                                                x="').concat(i.x,'" \n                                                y="').concat(i.y,'" \n                                                width="').concat(i.width,'" \n                                                height="').concat(i.height,'" \n                                                rx="').concat(i.rx,'"\n                                                ry="').concat(i.ry,'"\n                                                fill="').concat(i.fill,'" \n                                                transform="rotate(').concat(i.angle,')"\n                                                />\n'));break;default:m.Never("지원하지 않는 seat shape type 입니다. type:".concat(n.seatShape.type))}}))})),e.images.forEach((function(e){n.push('<image \n                                    href="'.concat(e.base64Jpeg,'"\n                                    x="').concat(e.x,'"\n                                    y="').concat(e.y,'"\n                                    width="').concat(e.width,'"\n                                    height="').concat(e.height,'"\n                                    transform="rotate(').concat(e.angle,')"\n                                    />\n'))})),{venue:{venueId:e.venueId,divElementWidth:e.width,divElementHeight:e.height},seats:t,images:n,mapping:r}}(Rr(i.current,a.current)),t=function(e){var t='<svg \n                    style="\n                        width:'.concat(e.venue.divElementWidth,"px; height:").concat(e.venue.divElementHeight,'px; \n                        border: 2px dashed;\n                        "\n                    id="').concat(e.venue.venueId,'"\n                >');return e.images.forEach((function(e){t+=e})),e.seats.forEach((function(e){t+=e})),t+="</svg>"}(e);return setTimeout((function(){var t,r;t=e,(r=document.getElementById("preview-selected-seat-info"))&&(r.innerText="구역: [  ?  ] - 좌석: [ ? ]행 [ ? ]열"),document.getElementById(t.venue.venueId),t.mapping.forEach((function(e){var t=document.getElementById(e.seatId);if(t){var n=t.getAttribute("fill"),o=null,i=null;"circle"===t.tagName&&(o=t.getAttribute("cx"),i=t.getAttribute("cy")),t.onmouseover=function(){t.style.cursor="pointer",t.style.transform="\n                                            translate(".concat(o,"px, ").concat(i,"px)\n                                            scale(1.2)                                             translate(-").concat(o,"px, -").concat(i,"px)                                             "),t.setAttribute("fill","#CD2121"),r&&(r.innerText="구역: [".concat(e.sectorId,"] - 좌석: [").concat(e.seatRow,"]행 [").concat(e.seatCol,"]열"))},t.onmouseout=function(){t.style.cursor="default",t.style.transform="\n                                            translate(".concat(o,"px, ").concat(i,"px)\n                                            scale(1.0)                                             translate(-").concat(o,"px, -").concat(i,"px)                                             "),t.setAttribute("fill",null!=n?n:"#CCDE11"),document.createElementNS("http://www.w3.org/2000/svg","text").textContent="".concat(e.seatRow),r&&(r.innerText="구역: [  ?  ] - 좌석: [ ? ]행 [ ? ]열")}}}))}),50),t}}))}),[r]);return u},kr=r(2731),Fr=["className"];function Br(){return Br=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Br.apply(this,arguments)}function Ur(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var Dr=o.forwardRef((function(e,t){var r=e.className,n=Ur(e,Fr);return o.createElement(kr.bL,Br({ref:t,className:nt("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r)},n),o.createElement(kr.C1,{className:nt("flex items-center justify-center text-current")},o.createElement(gt.Srz,{className:"h-4 w-4"})))}));Dr.displayName=kr.bL.displayName;var Lr=r(6540);function Mr(e){var t=e.activeToolUiState,r=e.imageInputRef,n=e.handleImageUpload,o=e.setActiveEditorToolTo,i=e.toggleGridView,a=e.isGridViewOn,l=e.IsEditButtonClickableUiState,c=e.toggleEditingMode,u=e.isInEditModeUiState,s=function(e){return t&&t.value===e||Array.isArray(e)&&e.some((function(e){return(null==e?void 0:e.value)===(null==t?void 0:t.value)}))};return Lr.createElement(Lr.Fragment,null,Lr.createElement("ul",{className:" z-30 flex flex-row p-3 gap-3 justify-center border-b text-gray-900"},te.map((function(e){return Lr.createElement("li",{key:e.name,onClick:function(){Array.isArray(e.value)||(e.value,o(e))},className:"flex justify-center items-center\n                              "},Lr.createElement(Dt,{tooltip:e.name,variant:"ghost",className:"relative w-12 h-12 p-3 prose\n                                                        ".concat(s(e.value)?" bg-gray-400 hover:bg-gray-500":"hover:bg-gray-200")},Lr.createElement(It,{src:e.icon,alt:e.name,fill:!0,className:"".concat(s(e.value)?"invert":"")})))})),Lr.createElement(Sr,{orientation:"vertical"}),Lr.createElement("div",{className:"px-6 flex items-center space-x-2"},Lr.createElement(Dr,{id:"show-grid",checked:a,onClick:i}),Lr.createElement("label",{htmlFor:"show-grid",className:"prose-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"},"Grid")),Lr.createElement(Sr,{orientation:"vertical"}),Lr.createElement("div",{className:"px-6 flex items-center"},Lr.createElement(Dt,{onClick:c,tooltip:"Edit Section",variant:"default",disabled:!1===l},!1===u?"Start Edit":"Quit Edit"))),Lr.createElement("input",{type:"file",className:"hidden",ref:r,accept:"image/*",onChange:n}))}function Xr(e){return Xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xr(e)}function Yr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Gr(n.key),n)}}function Gr(e){var t=function(e,t){if("object"!=Xr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Xr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Xr(t)?t:t+""}function Vr(e,t,r){return t=qr(t),function(e,t){if(t&&("object"===Xr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,zr()?Reflect.construct(t,r||[],qr(e).constructor):t.apply(e,r))}function zr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(zr=function(){return!!e})()}function Kr(e,t){return Kr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Kr(e,t)}function Wr(){return Wr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=qr(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Wr.apply(this,arguments)}function qr(e){return qr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},qr(e)}var Hr=function(e){function t(e,r,n,o){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=Vr(this,t,[k.SEAT,e,{innerShapeOptions:{fill:null==o?void 0:o.fill,radius:null==o?void 0:o.radius,width:null==o?void 0:o.width,height:null==o?void 0:o.height},innerTextOptions:{text:t._createLabel(r,n)},groupOptions:{angle:null==o?void 0:o.angle,left:null==o?void 0:o.left,top:null==o?void 0:o.top,lockScalingX:!0,lockScalingY:!0,lockRotation:!0},controlVisibilityOptions:{mtr:!1,mt:!1,tr:!1,tl:!1,mb:!1,ml:!1,mr:!1,bl:!1,br:!1}}]))._seatRow=r,i._seatCol=n,i.updateTextAngleToCurrentViewAngle(),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kr(e,t)}(t,e),r=t,o=[{key:"_createLabel",value:function(e,t){return"".concat(null!=e?e:"?","-").concat(null!=t?t:"?")}}],(n=[{key:"seatRow",get:function(){return this._seatRow},set:function(e){this._seatRow=e,this.updateInnerTextContent(t._createLabel(this._seatRow,this._seatCol))}},{key:"seatCol",get:function(){return this._seatCol},set:function(e){this._seatCol=e,this.updateInnerTextContent(t._createLabel(this._seatRow,this._seatCol))}},{key:"fill",get:function(){var e;return null===(e=this._innerShape)||void 0===e?void 0:e.fill},set:function(e){var t;null===(t=this._innerShape)||void 0===t||t.setOptions({fill:e})}},{key:"extractEditingState",value:function(){var e=Ee(this),t=e;return t.type="SeatEditingAttribute",t.seatRow=this._seatRow,t.seatCol=this._seatCol,t.fill=this.fill,e}},{key:"seatMapObjectProperty",get:function(){return{row:this._seatRow,col:this._seatCol}}},{key:"toObject",value:function(){return Wr(qr(t.prototype),"toObject",this).call(this,["seatMapObjectProperty"])}},{key:"exportAsSeatMapFormat",value:function(e){var t=this._cloneAsDestoryedShapeObject(e);switch(t.type){case I.FABRIC_CIRCLE:var r=t;return{seatId:this.objectId,seatRow:this.seatRow,seatCol:this.seatCol,seatShape:{type:I.FABRIC_CIRCLE,fill:r.fill,cx:r.getCenterPoint().x,cy:r.getCenterPoint().y,r:r.getRadiusX()}};case I.FABRIC_RECT:var n=t;return m.NonNull(n.left,"좌석 내부 도형의 left가 null입니다"),m.NonNull(n.top,"좌석 내부 도형의 top이 null입니다"),m.NonNull(n.width,"좌석 내부 도형의 width가 null입니다"),m.NonNull(n.height,"좌석 내부 도형의 height가 null입니다"),{seatId:this.objectId,seatRow:this.seatRow,seatCol:this.seatCol,seatShape:{type:I.FABRIC_RECT,fill:n.fill,x:n.left,y:n.top,width:n.width,height:n.height,rx:n.rx,ry:n.ry,angle:n.angle}};default:return m.Never("지원하지 않는 좌석 Shape입니다. shape: ".concat(t.type)),{}}}},{key:"_cloneAsDestoryedShapeObject",value:function(e){var t=this.constructNewCopy();if(e){var r,n,o=t.left?t.left-(null!==(r=e.left)&&void 0!==r?r:0):t.left,i=t.top?t.top-(null!==(n=e.top)&&void 0!==n?n:0):t.top;t.setOptions({left:o,top:i})}var a=t.destroy()._innerShape;return m.NonNull(a,"Seat은 내부 innerShape 객체가 반드시 존재해야 합니다!"),a}},{key:"afterModified",value:function(){this.updateTextAngleToCurrentViewAngle()}},{key:"constructNewCopy",value:function(){return this.innerShapeType===I.FABRIC_CIRCLE?new t(this.innerShapeType,this.seatRow,this.seatCol,{fill:this.fill,angle:this.angle,left:this.left,top:this.top,width:this.width,height:this.height,radius:this._innerShape.radius}):new t(this.innerShapeType,this.seatRow,this.seatCol,{fill:this.fill,angle:this.angle,left:this.left,top:this.top,width:this.width,height:this.height})}},{key:"updateTextAngleToCurrentViewAngle",value:function(){var e;if(null!==(e=this.group)&&void 0!==e&&e.angle){var t=(360-this.group.angle)%360;this.updateInnerTextAngle(t)}else if(this.angle){var r=(360-this.angle)%360;this.updateInnerTextAngle(r)}}}])&&Yr(r.prototype,n),o&&Yr(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(et);function Zr(e){return Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zr(e)}function Jr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,on(n.key),n)}}function $r(e,t,r){return t=rn(t),function(e,t){if(t&&("object"===Zr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Qr()?Reflect.construct(t,r||[],rn(e).constructor):t.apply(e,r))}function Qr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Qr=function(){return!!e})()}function en(e,t){return en=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},en(e,t)}function tn(){return tn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=rn(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},tn.apply(this,arguments)}function rn(e){return rn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},rn(e)}function nn(e,t,r){return(t=on(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function on(e){var t=function(e,t){if("object"!=Zr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Zr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Zr(t)?t:t+""}var an=function(e){function t(e,r,n,o,i,a,l){var c,u,s,f;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),nn(f=$r(this,t,[k.SECTOR,e,{groupOptions:{lockScalingX:!0,lockScalingY:!0,left:null==l?void 0:l.left,top:null==l?void 0:l.top},controlVisibilityOptions:{mtr:!0,mt:!1,tr:!1,tl:!1,mb:!1,ml:!1,mr:!1,bl:!1,br:!1}}]),"_seatRowCount",0),nn(f,"_seatColCount",0),nn(f,"_gapX",0),nn(f,"_gapY",0),nn(f,"_gapPrev",0),nn(f,"_anglePrev",0),n&&(f._seatRowCount=n),o&&(f._seatColCount=o),i&&(f._gapX=i),a&&(f._gapY=a),f._sectorId=r,f._sectorColor=null!==(c=null==l?void 0:l.fill)&&void 0!==c?c:K.object.default;var p=null!==(u=null==l?void 0:l.left)&&void 0!==u?u:0,d=null!==(s=null==l?void 0:l.top)&&void 0!==s?s:0;if(n&&o)for(var v=0;v<n;++v)for(var b=0;b<o;++b){var y=new Hr(I.FABRIC_CIRCLE,v+1,b+1,{radius:z/2,width:z,height:z,left:p+b*(z+f._gapX),top:d+v*(z+f._gapY),fill:f._sectorColor});f.addWithUpdate(y)}return f}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&en(e,t)}(t,e),r=t,(n=[{key:"sectorId",get:function(){return this._sectorId},set:function(e){this._sectorId=e}},{key:"sectorGapX",get:function(){return this._gapX},set:function(e){this._applyGapXandUpdate(e)}},{key:"sectorGapY",get:function(){return this._gapY},set:function(e){this._applyGapYandUpdate(e)}},{key:"sectorRows",get:function(){return this._seatRowCount}},{key:"sectorCols",get:function(){return this._seatColCount}},{key:"fill",get:function(){return this._sectorColor},set:function(e){this._sectorColor=e,this.getSeats().forEach((function(t){t.fill=e}))}},{key:"extractEditingState",value:function(){var e,t,r=Ee(this);return r.type="SectorEditingAttribute",r.sectorId=this._sectorId,r.sectorGapX=null!==(e=this._gapX)&&void 0!==e?e:0,r.sectorGapY=null!==(t=this._gapY)&&void 0!==t?t:0,r.fill=this.fill,r}},{key:"seatMapObjectProperty",get:function(){return{gapX:this.sectorGapX,gapY:this.sectorGapY,rows:this.sectorRows,cols:this.sectorCols}}},{key:"toObject",value:function(){return tn(rn(t.prototype),"toObject",this).call(this,["seatMapObjectProperty"])}},{key:"exportAsSeatMapFormat",value:function(e){var t=[];return this._collectDataFromEachSeat((function(r){return t.push(r.exportAsSeatMapFormat(e))})),{sectorId:this.sectorId,seats:t}}},{key:"afterModified",value:function(){void 0!==this.angle&&this.getSeats().forEach((function(e){e.afterModified()}))}},{key:"getSeats",value:function(){var e=[];return this.getObjects().forEach((function(t){k.SEAT===F.getType(t)&&(m.True(t instanceof Hr),e.push(t))})),e}},{key:"addSeatWithUpdate",value:function(e){this._seatRowCount=0,this._seatColCount=0,this.addWithUpdate(e)}},{key:"constructNewCopy",value:function(){return new t(this.innerShapeType,this.sectorId,this.sectorRows,this.sectorCols,this.sectorGapX,this.sectorGapY,{angle:this.angle,fill:this.fill,left:this.left,top:this.top,width:this.width,height:this.height})}},{key:"_applyGapXandUpdate",value:function(e){var t=this;this._gapPrev=this._gapX,this._gapX=e,void 0!==this.angle&&(this._anglePrev=this.angle),this.setOptions({angle:0,originX:"left",originY:"top"}),this.getSeats().forEach((function(e,r){m.NonNull(e.left,"obj.left값이 null이면 안됩니다."),m.True(e instanceof Hr,"Sector 내부 객체들은 모두 Seat객체여야 합니다.");var n=e.left+(e.seatCol-1)*(t._gapX-t._gapPrev);e.setOptions({left:n})})),this.addWithUpdate(),this.setOptions({angle:this._anglePrev,originX:"left",originY:"top"})}},{key:"_applyGapYandUpdate",value:function(e){var t=this;this._gapPrev=this._gapY,this._gapY=e,void 0!==this.angle&&(this._anglePrev=this.angle),this.setOptions({angle:0,originX:"left",originY:"top"}),this.getSeats().forEach((function(e){m.NonNull(e.top,"obj.top값이 null이면 안됩니다."),m.NonNull(e instanceof Hr,"Sector 내부 객체들은 모두 Seat객체여야 합니다.");var r=e.top+(e.seatRow-1)*(t._gapY-t._gapPrev);e.setOptions({top:r})})),this.addWithUpdate(),this.setOptions({angle:this._anglePrev})}},{key:"_isEditedSector",value:function(){return 0===this._seatRowCount||0===this._seatColCount}},{key:"_collectDataFromEachSeat",value:function(e){(0,ut.cloneDeep)(this).destroy().getSeats().forEach((function(t){k.SEAT===F.getType(t)&&(m.True(t instanceof Hr),e(t))}))}}])&&Jr(r.prototype,n),o&&Jr(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(et);function ln(e){return function(e){if(Array.isArray(e))return cn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return cn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cn(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}nn(an,"_staticFontSize",12);var un=function(e){var t=e.getActiveObjects();if(!(t.length<=1)){e.remove.apply(e,ln(t)),e.discardActiveObject();var r=new i.fabric.Group;t.forEach((function(e){r.addWithUpdate(st().cloneDeep(e))})),e.add(r),e.setActiveObject(r),e.renderAll()}},sn=function(e){var t=e.getActiveObjects();if(t.some((function(e){return e instanceof an})))alert("선택된 개체중 Sector가 포함되어 있습니다.\nSector는 그룹을 해제할 수 없습니다.\n편집하려면, Section Edit 버튼이나 더블클릭을 눌러주세요.");else{e.remove.apply(e,ln(t)),e.discardActiveObject();var r=new i.fabric.ActiveSelection(void 0,{canvas:e});t.forEach((function(t){if(t instanceof i.fabric.Group)t.destroy().getObjects().forEach((function(t){var n=st().cloneDeep(t);e.add(n),r.addWithUpdate(n)}));else{var n=st().cloneDeep(t);e.add(n),r.addWithUpdate(n)}})),e.setActiveObject(r),e.renderAll()}},fn=function(e){var t=e.getActiveObjects();if(t.length>0){var r=t.map((function(e){return e.toObject()})),n=JSON.stringify(r);localStorage.setItem("fabric-clipboard",n)}return t},pn=function(e){m.True(e&&e instanceof i.fabric.Canvas,"canvas가 유효한 Fabric Canvas가 아닙니다!");var t,r,n=localStorage.getItem("fabric-clipboard");if(n)try{var o=JSON.parse(n),l=(t=0,r=20,Math.random()*(r-t)+t);o.forEach((function(t){var r=[];i.fabric.util.enlivenObjects([t],(function(t){t.forEach((function(t){switch(F.getType(t)){case k.SECTOR:var n=t;r.push(new an(n.innerShapeType,"NULL",n.seatMapObjectProperty.rows,n.seatMapObjectProperty.cols,n.seatMapObjectProperty.gapX,n.seatMapObjectProperty.gapY,{left:n.left?n.left+l:e.getCenter().left,top:n.top?n.top+l:e.getCenter().top,fill:n.fill,angle:n.angle}));break;case k.SEAT:m.Never("아직 미구현된 기능입니다.");break;case I.FABRIC_GROUP:t.forEachObject((function(e){e.objectId=(0,a.A)()})),t.set({left:t.left?t.left+l:e.getCenter().left,top:t.top?t.top+l:e.getCenter().top,hasControls:!1,objectId:(0,a.A)()}),r.push(t);break;default:t.set({left:t.left?t.left+l:e.getCenter().left,top:t.top?t.top+l:e.getCenter().top,hasControls:!1,objectId:(0,a.A)()}),r.push(t)}})),e.add.apply(e,r),function(e,t){e.discardActiveObject();var r=new i.fabric.ActiveSelection(t,{canvas:e});e.setActiveObject(r),e.requestRenderAll()}(e,r),e.renderAll()}),"fabric")}))}catch(e){}},dn=function(e){var t=e.getActiveObjects();t&&0!==t.length&&(t.length>0&&t.forEach((function(t){e.remove(t)})),e.discardActiveObject(),e.requestRenderAll())},vn=function(e){var t=e.e,r=e.canvas,n=e.undo,o=e.redo,a=e.disable,l=e.setActiveEditorToolTo;a||((null!=t&&t.ctrlKey||null!=t&&t.metaKey)&&"KeyC"===t.code&&fn(r),(null!=t&&t.ctrlKey||null!=t&&t.metaKey)&&"KeyV"===t.code&&pn(r),"Backspace"!==t.code&&"Delete"!==t.code||dn(r),(null!=t&&t.ctrlKey||null!=t&&t.metaKey)&&"KeyX"===t.code&&(fn(r),dn(r)),(null!=t&&t.ctrlKey||null!=t&&t.metaKey)&&"KeyZ"===t.code&&n(),(null!=t&&t.ctrlKey||null!=t&&t.metaKey)&&"KeyY"===t.code&&o(),(null!=t&&t.ctrlKey||null!=t&&t.metaKey)&&"KeyG"===t.code&&(t.preventDefault(),un(r)),(null!=t&&t.ctrlKey||null!=t&&t.metaKey)&&null!=t&&t.shiftKey&&"KeyG"===t.code&&(t.preventDefault(),sn(r)),(null!=t&&t.ctrlKey||null!=t&&t.metaKey)&&"KeyA"===t.code&&(t.preventDefault(),function(e){e.discardActiveObject();var t=new i.fabric.ActiveSelection(e.getObjects(),{canvas:e});e.setActiveObject(t),e.requestRenderAll()}(r)),(null!=t&&t.ctrlKey||null!=t&&t.metaKey)&&"BracketRight"===t.code&&ve({direction:"front",canvas:r}),(null!=t&&t.ctrlKey||null!=t&&t.metaKey)&&"BracketLeft"===t.code&&ve({direction:"back",canvas:r}),"Escape"!==t.code||t.shiftKey||(t.preventDefault(),l(re)),"Slash"!==t.code||t.shiftKey||t.preventDefault())};function bn(){alert("undo")}function yn(){alert("redo")}var hn=r(1643);r(8132);function mn(e){return mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mn(e)}function gn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Sn(n.key),n)}}function On(e,t,r){return t=jn(t),function(e,t){if(t&&("object"===mn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,wn()?Reflect.construct(t,r||[],jn(e).constructor):t.apply(e,r))}function wn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wn=function(){return!!e})()}function jn(e){return jn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},jn(e)}function En(e,t){return En=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},En(e,t)}function Sn(e){var t=function(e,t){if("object"!=mn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=mn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==mn(t)?t:t+""}var xn,Nn,Cn,Rn=function(e){function t(e,r,n,o){var i,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=On(this,t,[k.VENUE,I.FABRIC_RECT,{groupOptions:{left:null==o?void 0:o.left,top:null==o?void 0:o.top,lockRotation:!0,opacity:.8,originX:"left",originY:"top"},innerShapeOptions:{width:r,height:n,strokeWidth:1,strokeDashArray:[5,5],stroke:"black",fill:null!==(i=null==o?void 0:o.fill)&&void 0!==i?i:"rgba(0,0,0,0)"},innerTextOptions:{text:"Venue: ".concat(e),fontSize:t._staticFontSize,left:null!=o&&o.left?(null==o?void 0:o.left)+t._staticFontSize:0,top:null!=o&&o.top?(null==o?void 0:o.top)+t._staticFontSize:0},controlVisibilityOptions:{mtr:!1,mt:!0,tr:!0,tl:!0,mb:!0,ml:!0,mr:!0,bl:!0,br:!0}}]))._venueId=e,a.afterModified(),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&En(e,t)}(t,e),r=t,(n=[{key:"venueId",get:function(){return this._venueId},set:function(e){this._venueId=e,this.updateInnerTextContent("Venue: ".concat(e))}},{key:"extractEditingState",value:function(){return{type:"VenueEditingAttribute",venueId:this._venueId}}},{key:"seatMapObjectProperty",get:function(){return m.Never("Venue는 현재는 Edit 기능 + 복붙 기능 없기 때문에, object로 변환할 필요가 없습니다."),null}},{key:"toObject",value:function(e){return m.Never("Venue는 현재는 Edit 기능 + 복붙 기능 없기 때문에, object로 변환할 필요가 없습니다."),null}},{key:"afterRotating",value:function(){}},{key:"afterScaling",value:function(){this.updateInnerTextVisibility(!1)}},{key:"afterModified",value:function(){m.NonNull(this._innerLabelText),this.removeWithUpdate(this._innerLabelText);var e=this._createInternalFabricObject(I.FABRIC_TEXT,{text:"Venue: ".concat(this._venueId),fontSize:t._staticFontSize});this.add(e),this._innerLabelText=e,this._innerLabelText.setOptions({left:-this.width/2+t._staticFontSize,top:-this.height/2+t._staticFontSize}),this.addWithUpdate()}}])&&gn(r.prototype,n),o&&gn(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(Ke);xn=Rn,Cn=20,(Nn=Sn(Nn="_staticFontSize"))in xn?Object.defineProperty(xn,Nn,{value:Cn,enumerable:!0,configurable:!0,writable:!0}):xn[Nn]=Cn;var _n=r(6540);function Pn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return An(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return An(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function An(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Tn(){var e=(0,o.useRef)(null),t=(0,o.useRef)(null),r=(0,o.useRef)(null),n=(0,o.useRef)(null),a=(0,o.useRef)(null),l=Pn((0,o.useState)(!1),2),c=l[0],u=l[1],s=(0,o.useRef)(null),f=(0,o.useRef)(!1),p=(0,o.useRef)(null),d=(0,o.useRef)({x:0,y:0}),v=(0,o.useRef)(null),b=(0,o.useRef)(!1),y=(0,o.useRef)(null),h=Pn((0,o.useState)(null),2),g=h[0],O=h[1],w=(0,o.useRef)(!1),j=Pn((0,hn.e)(null),2),E=j[0],S=j[1],x=Pn((0,hn.e)(!1),2),N=x[0],C=x[1],R=Pn((0,hn.e)(!1),2),_=R[0],P=R[1],A=(0,o.useRef)(!1),T=(0,o.useRef)(null),V=(0,o.useRef)(null),z=(0,o.useRef)(null),H=function(e,t){e.hoverCursor=!0===t?"hover":"default",e.selection=t,e.forEachObject((function(e){e.selectable=t}))},Z=function e(o){var i,l;switch(m.NonNull(t.current),m.NonNull(r.current),m.NonNull(a.current),m.NonNull(o.value),n.current=null,null===(i=r.current)||void 0===i||i.clear(),y.current=null,f.current=!1,t.current.isDrawingMode=!1,t.current.setCursor("default"),H(t.current,!0),null==o?void 0:o.value){case U.select:y.current=U.select,O(W);break;case U.image:null===(l=s.current)||void 0===l||l.click(),e(re);break;case U.group:un(t.current),e(re);break;case U.ungroup:sn(t.current),e(re);break;case U.delete:dn(t.current),e(re);break;case U.panning:H(t.current,!1),y.current=U.panning,O(q);break;case U.sector:t.current.discardActiveObject(),y.current=U.sector,H(t.current,!1),O(ee);break;default:y.current=null==o?void 0:o.value,H(t.current,!1);var c=fe(y.current,void 0,{opacity:X});c&&(r.current.add(c),n.current=c),O(o)}};return(0,o.useEffect)((function(){var o,l,c=ge({htmlCanvasElementId:"fabric-canvas",canvasRef:e,fabricRef:t});c.setZoom(1),i.fabric.Group.prototype.set({borderColor:"#ff00ff",cornerColor:"#ff0000",lockScalingX:!0,lockScalingY:!0});var u=new i.fabric.StaticCanvas("preview-canvas",{width:c.width,height:c.height,defaultCursor:"none"});u.setZoom(1),r.current=u;var s=new i.fabric.StaticCanvas("grid-canvas",{width:c.width,height:c.height,defaultCursor:"none"});s.setZoom(1),a.current=s;for(var h=2*a.current.getWidth(),g=-h/4,j=0;j<h/30+1;++j)a.current.add(new i.fabric.Line([g+30*j,g+0,g+30*j,g+h],{strokeWidth:1,type:"line",stroke:M,selectable:!1})),a.current.add(new i.fabric.Line([g+0,g+30*j,g+h,g+30*j],{strokeWidth:1,type:"line",stroke:M,selectable:!1}));O(re),m.True("string"==typeof re.value,"초기 설정 도구는 value가 string 타입이여야 합니다."),y.current=re.value,m.NonNull(t.current,"fabric canvas가 null일 수 없습니다.");var E=null===(o=t.current)||void 0===o?void 0:o.width;m.NonNull(E,"fabric canvas와 width가 null일 수 없습니다.");var x=null===(l=t.current)||void 0===l?void 0:l.height;m.NonNull(x,"fabric canvas와 height가 null일 수 없습니다.");var N=new Rn("공연장 1",.7*E,.8*x);t.current.add(N),t.current.centerObject(N),t.current.requestRenderAll(),T.current=N,c.on("selection:created",(function(e){var r;xe({options:e,setEditingElementUiAttributes:S}),Z(re),w.current=!1;var n=null===(r=t.current)||void 0===r?void 0:r.getActiveObjects();if(!0!==A.current)if(!1===A.current&&n&&1===(null==n?void 0:n.length)){var o=n[0],i=F.getType(o),a=o&&k.SECTOR===i;C(a)}else;else C(!0)})),c.on("selection:updated",(function(e){var r;Se({options:e,setEditingElementUiAttributes:S}),Z(re),w.current=!1;var n=null===(r=t.current)||void 0===r?void 0:r.getActiveObjects();if(!0!==A.current)if(!1===A.current&&n&&1===(null==n?void 0:n.length)){var o=n[0],i=F.getType(o),a=o&&k.SECTOR===i;C(a)}else;else C(!0)})),c.on("selection:cleared",(function(e){S(null),!1===A.current&&C(!1),w.current=!1})),c.on("object:modified",(function(e){!0===B(e.target)&&e.target.afterModified()})),c.on("object:added",(function(e){})),c.on("object:removed",(function(e){if(!0===A.current){var t=e.target;m.NonNull(V.current,"편집모드 중에는 editingSeatsRef가 반드시 존재해야 합니다!"),V.current.delete(t.objectId)}})),c.on("object:rotating",(function(e){!0===B(e.target)&&e.target.afterRotating()})),c.on("object:scaling",(function(e){Ne({options:e,setEditingElementUiAttributes:S}),!0===B(e.target)&&e.target.afterScaling()})),c.on("object:moving",(function(e){})),c.on("object:resizing",(function(e){})),c.on("object:rotating",(function(e){})),c.on("object:scaling",(function(e){})),c.on("mouse:over",(function(e){})),c.on("mouse:out",(function(e){})),c.on("mouse:move",(function(e){var o,l,u,s=c.getPointer(e.e);switch(y.current){case U.panning:if(null===(o=t.current)||void 0===o||o.setCursor("grab"),!0===f.current&&e.pointer){var p,v,b,h,g,O;null===(p=t.current)||void 0===p||p.setCursor("grabbing");var w,j,E=null===(v=t.current)||void 0===v?void 0:v.viewportTransform;if(E)E[4]+=(null===(w=e.pointer)||void 0===w?void 0:w.x)-d.current.x,E[5]+=(null===(j=e.pointer)||void 0===j?void 0:j.y)-d.current.y;d.current={x:null===(b=e.pointer)||void 0===b?void 0:b.x,y:null===(h=e.pointer)||void 0===h?void 0:h.y},null===(g=t.current)||void 0===g||g.requestRenderAll();var S,x,N=null===(O=t.current)||void 0===O?void 0:O.viewportTransform;if(N)null===(S=r.current)||void 0===S||S.setViewportTransform(N).requestRenderAll(),null===(x=a.current)||void 0===x||x.setViewportTransform(N).requestRenderAll()}break;case U.sector:if(null===(l=t.current)||void 0===l||l.setCursor("crosshair"),n.current){var C;m.True(n.current instanceof i.fabric.Group,"Preview 객체가 그룹이 아닙니다. 객체 생성 부분을 체크해주세요.");var R=n.current,_=s.x-d.current.x,P=s.y-d.current.y;R.item(0).set({width:_,height:P});var A=Math.ceil(_/Y),T=Math.ceil(P/G);R.item(1).set("text","".concat(A,"×").concat(T)),R.set({width:_,height:P}),null===(C=r.current)||void 0===C||C.requestRenderAll()}break;default:null===(u=n.current)||void 0===u||null===(u=u.set({left:s.x,top:s.y}).setCoords().canvas)||void 0===u||u.renderAll()}})),c.on("mouse:down",(function(e){var r;p.current=y.current,e.e.shiftKey&&(m.True("string"==typeof q.value,"panning 설정의 value는 반드시 string이여야 합니다."),y.current=q.value),Oe({options:e,fabricCanvas:c,previewCanvas:u,selectedToolValueRef:y,lastModifiedObjectRef:v,isPanningRef:f,lastMousePointerRef:d,isSectorCreatingRef:b,previewSeatShapeRef:n}),null===(r=t.current)||void 0===r||r.requestRenderAll()})),c.on("mouse:up",(function(e){var o;m.NonNull(t.current);var i=c.getPointer(e.e);if(y.current===U.sector){var a=d.current,l=i,u=l.x-a.x,s=l.y-a.y,h=Math.ceil(u/Y),g=Math.ceil(s/G);if(g<1&&h<1)return alert("sector는 좌석 1개 이상부터 배치부터 생성 가능합니다."),Z(re),null;var O=new an(I.FABRIC_RECT,"NULL",g,h,0,0,{left:a.x,top:a.y,fill:K.object.default,width:u,height:s});b.current=!1,n.current=null,null===(o=r.current)||void 0===o||o.clear(),Z(re),v.current=O,t.current.add(O).requestRenderAll(),t.current.setActiveObject(O),O.setCoords()}else!0===f.current&&(t.current.setCursor("grab"),f.current=!1),y.current=p.current})),c.on("mouse:wheel",(function(e){var n,o,i,l,f;e.e.deltaY>0?null===(l=t.current)||void 0===l||l.setCursor("zoom-in"):null===(f=t.current)||void 0===f||f.setCursor("zoom-out");Re({options:e,canvas:c}),null===(n=t.current)||void 0===n||n.requestRenderAll(),Re({options:e,canvas:u}),null===(o=r.current)||void 0===o||o.requestRenderAll(),Re({options:e,canvas:s}),null===(i=a.current)||void 0===i||i.requestRenderAll()}));var R=function(e){var n,o,i,l,c,u,s,f,p,d;Ce({htmlCanvasElementId:"fabric-canvas",canvas:t.current}),null===(n=r.current)||void 0===n||n.setDimensions({width:null!==(o=null===(i=t.current)||void 0===i?void 0:i.width)&&void 0!==o?o:0,height:null!==(l=null===(c=t.current)||void 0===c?void 0:c.height)&&void 0!==l?l:0}),null===(u=a.current)||void 0===u||u.setDimensions({width:null!==(s=null===(f=t.current)||void 0===f?void 0:f.width)&&void 0!==s?s:0,height:null!==(p=null===(d=t.current)||void 0===d?void 0:d.height)&&void 0!==p?p:0})},_=function(e){vn({e:e,canvas:t.current,undo:bn,redo:yn,disable:w.current,setActiveEditorToolTo:Z})};return window.addEventListener("resize",R),window.addEventListener("keydown",_),function(){c.dispose(),u.dispose(),s.dispose(),window.removeEventListener("resize",R),window.removeEventListener("keydown",_)}}),[e]),_n.createElement(_n.Fragment,null,_n.createElement("div",{className:" flex flex-col w-full h-[100vh]"},_n.createElement(Mr,{activeToolUiState:g,IsEditButtonClickableUiState:N,toggleEditingMode:function(){var e=t.current;m.NonNull(e),A.current=!A.current;var r=!0===A.current;u(!r),P(r);var n=!0===A.current?D:L;e.backgroundColor=n,e.requestRenderAll();var o=e.getActiveObject();if(e.forEachObject((function(e){var t=F.getType(e);e!==o&&e.set({selectable:!0!==r,evented:!0!==r,opacity:!0===r?.35:1}),e!==o&&k.VENUE===t&&(e.visible=!0!==r)})),e.selection=!0!==r,e.discardActiveObject().renderAll(),!0===r){m.NonNull(o),m.True(k.SECTOR===F.getType(o),"편집 대상 Object는 Sector여야 합니다."),z.current=o,V.current=new Map;var a=new i.fabric.ActiveSelection(void 0,{canvas:e});return e.remove(o),o.destroy().getSeats().forEach((function(t){var r;m.True(t instanceof Hr);var n=t.constructNewCopy();e.add(n),a.addWithUpdate(n),null===(r=V.current)||void 0===r||r.set(n.objectId,n)})),void e.setActiveObject(a).requestRenderAll()}if(!1===r){var l;m.NonNull(z.current),m.NonNull(V.current);var c=new an(z.current.innerShapeType,z.current.sectorId);null===(l=V.current)||void 0===l||l.forEach((function(t){e.remove(t),c.addSeatWithUpdate(t)})),e.add(c),V.current.clear(),V.current=null,z.current=null,v.current=c,e.discardActiveObject().requestRenderAll(),C(!1)}},setActiveEditorToolTo:Z,imageInputRef:s,toggleGridView:function(){return u((function(e){return!e}))},isGridViewOn:c,handleImageUpload:function(e){e.stopPropagation(),pe({file:e.target.files[0],canvas:t})},isInEditModeUiState:_}),_n.createElement("section",{className:"flex flex-row w-full h-full justify-between"},_n.createElement("div",{className:"relative w-full h-full "},_n.createElement(Te,{id:"fabric-canvas",className:" w-full h-full z-10",ref:e}),_n.createElement("canvas",{id:"preview-canvas",className:" pointer-events-none absolute top-0 left-0 right-0 z-10"}),_n.createElement("canvas",{hidden:!1===c,id:"grid-canvas",className:" pointer-events-none absolute top-0 left-0 right-0 z-0"})),_n.createElement(Ir,{keyboardEventDisableRef:w,editingElementUiAttributes:E,setEditingElementUiAttributes:S,fabricRef:t,venueRef:T}))))}var In=r(6540);var kn=function(){return In.createElement("div",{className:"App"},In.createElement("section",null,In.createElement(Tn,null)))},Fn=r(6540),Bn=document.getElementById("root");(0,n.H)(Bn).render(Fn.createElement(kn,null))},8132:function(){setTimeout((()=>{}),10)},6574:function(){},2748:function(){},2246:function(){}},o={};function i(e){var t=o[e];if(void 0!==t)return t.exports;var r=o[e]={id:e,loaded:!1,exports:{}};return n[e].call(r.exports,r,r.exports,i),r.loaded=!0,r.exports}i.m=n,e=[],i.O=function(t,r,n,o){if(!r){var a=1/0;for(s=0;s<e.length;s++){r=e[s][0],n=e[s][1],o=e[s][2];for(var l=!0,c=0;c<r.length;c++)(!1&o||a>=o)&&Object.keys(i.O).every((function(e){return i.O[e](r[c])}))?r.splice(c--,1):(l=!1,o<a&&(a=o));if(l){e.splice(s--,1);var u=n();void 0!==u&&(t=u)}}return t}o=o||0;for(var s=e.length;s>0&&e[s-1][2]>o;s--)e[s]=e[s-1];e[s]=[r,n,o]},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},r=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},i.t=function(e,n){if(1&n&&(e=this(e)),8&n)return e;if("object"==typeof e&&e){if(4&n&&e.__esModule)return e;if(16&n&&"function"==typeof e.then)return e}var o=Object.create(null);i.r(o);var a={};t=t||[null,r({}),r([]),r(r)];for(var l=2&n&&e;"object"==typeof l&&!~t.indexOf(l);l=r(l))Object.getOwnPropertyNames(l).forEach((function(t){a[t]=function(){return e[t]}}));return a.default=function(){return e},i.d(o,a),o},i.d=function(e,t){for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){var e={792:0};i.O.j=function(t){return 0===e[t]};var t=function(t,r){var n,o,a=r[0],l=r[1],c=r[2],u=0;if(a.some((function(t){return 0!==e[t]}))){for(n in l)i.o(l,n)&&(i.m[n]=l[n]);if(c)var s=c(i)}for(t&&t(r);u<a.length;u++)o=a[u],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(s)},r=self.webpackChunkeditor_v0=self.webpackChunkeditor_v0||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),i.nc=void 0;var a=i.O(void 0,[805],(function(){return i(751)}));a=i.O(a)}();